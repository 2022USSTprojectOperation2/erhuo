<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="css/bootstrap5/css/bootstrap.min.css">
    <script src="./js/vue.js"></script>
    <script src="./js/axios-0.18.0.js"></script>
    <link rel="stylesheet" href="./js/element-ui/lib/theme-chalk/index.css">
    <script src="./js/element-ui/lib/index.js"></script>
    <title>浏览商品</title>
</head>
<body style="background-color: #f7f7f7">
<div id="app">
    <el-container>
        <el-header>
            <el-menu :default-active="activeIndex" class="el-menu-demo" mode="horizontal" @select="handleSelect">
                <el-menu-item style="float: right" index="1">处理中心</el-menu-item>
                <el-submenu style="float: right" index="2">
                    <template slot="title">我的工作台</template>
                    <el-menu-item index="2-1">选项1</el-menu-item>
                    <el-menu-item index="2-2">选项2</el-menu-item>
                    <el-menu-item index="2-3">选项3</el-menu-item>
                    <el-submenu index="2-4">
                        <template slot="title">选项4</template>
                        <el-menu-item index="2-4-1">选项1</el-menu-item>
                        <el-menu-item index="2-4-2">选项2</el-menu-item>
                        <el-menu-item index="2-4-3">选项3</el-menu-item>
                    </el-submenu>
                </el-submenu>
                <el-menu-item style="float: right" index="3">消息中心</el-menu-item>
            </el-menu>
        </el-header>
        <el-main>
            <div class="container">
                <el-row :gutter="16">
                    <div v-for="goods in goodsList">
                        <el-col :xs="24" :sm="12" :md="8" :lg="6">
                            <el-card :body-style="{ padding: '0px' }" shadow="hover" class="mb-3" style="border-radius: 10px">
                                <el-image :src="goods.imgPath" fit="contain"></el-image>
                                <div style="padding: 16px;">
                                    <div class="fs-5">{{goods.goodsName}}</div>
                                    <div class="fs-4 fw-bold text-secondary">￥{{goods.price}}</div>
                                </div>
                            </el-card>
                        </el-col>
                    </div>
                </el-row>
            </div>
            <el-pagination
                    class="text-center"
                    background
                    layout="prev, pager, next"
                    :total="total"
                    :page-size="pageSize"
                    @current-change="changePage">
            </el-pagination>
        </el-main>
    </el-container>
</div>
</body>
<script>
    new Vue({
        el: '#app',
        data:{
            goodsList:[],
            total:0,
            pageSize:12
        },
        methods: {
            changePage(currentPage){
                axios.get("/goods/all/"+this.pageSize+"/"+currentPage).then((res) => {
                    this.goodsList = res.data.data
                    this.total=res.data.totalCount
                })
            }
        },
        created() {
            axios.get("/goods/all/"+this.pageSize+"/1").then((res) => {
                this.goodsList = res.data.data
                this.total=res.data.totalCount
            })
        }
    })
</script>
</html>